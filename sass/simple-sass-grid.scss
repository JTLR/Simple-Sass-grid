@import "compass/css3";
@import "helpers";

$stylesheet: stylesheet;

// Breakpoints
$small: 30.063em;    // Above 320px
$medium: 33.813em;   // Above 480px
$large: 48em;        // Above 767px
$xlarge: 64em;       // Above 1024px

$grid-columns: 24;            
$grid-width: rem(1170);         
$column-width: 1.709404%;      
$column-margin: 2.5641%;

$breakpoints: 0 $small $medium $large $xlarge;
$breakpoint-alias: base small medium large xlarge;
$current-breakpoint: 1;

.grid {
    float: left;
    clear: both;
    width: 100%;
}
.row {
    max-width: $grid-width;
    margin: 0 auto;
    padding: 0 rem(10);   
    @include box-sizing(content-box);
    &:after {
        @include clear-fix;
        content: ' ';
    }
}
.col {
    float: left;
    display: inline;
    width: 100%;
    margin: 0 $column-margin 20px 0;
    background-color: #ccc;
    &:last-child {
        margin-right: 0;
    }
}
@each $breakpoint in $breakpoints {
    $slug: nth($breakpoint-alias, $current-breakpoint);
    @include breakpoint(nth($breakpoints, $current-breakpoint), $current-breakpoint) {      
        .row {    
            padding: 0 rem(10 * $current-breakpoint);        
        }
        .col {
            @for $i from 1 through $grid-columns {
                &.#{$slug}-#{$i} {
                    width: ($column-width * $i) + ($column-margin * ($i - 1));
                }
            }
        }   
        @for $i from 0 through ($grid-columns) {
            .#{$slug}-push-#{$i} {
                margin-left: ($column-width * $i) + ($column-margin * $i);
            }
        }        
        .#{$slug}-show {
            display: block;
        }
        .#{$slug}-hide {
            display: none;
        }   
    }
    $current-breakpoint: $current-breakpoint + 1;
}